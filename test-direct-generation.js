#!/usr/bin/env node

// üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –¢–ï–°–¢: –ü—Ä—è–º–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑ retry –ª–æ–≥–∏–∫–∏
// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

const fetch = require('node-fetch');

async function testDirectGeneration() {
  console.log('üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –¢–ï–°–¢ –ü–†–Ø–ú–û–ô –ì–ï–ù–ï–†–ê–¶–ò–ò');
  console.log('üéØ –¶–µ–ª—å: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ validateCompleteArticle');
  console.log('');

  try {
    // –í–º–µ—Å—Ç–æ API –ø–æ–ø—Ä–æ–±—É–µ–º —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç—É—é —Å—Ç–∞—Ç—å—é —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
    console.log('üîÑ –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç–∞—Ç—å—é...');
    
    const testArticle = {
      title: '–¢–ï–°–¢: –ö–∞–∫ –∑–∞—â–∏—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞—Ö',
      content: `## –í–≤–µ–¥–µ–Ω–∏–µ

–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç–∞—Ç—å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–ª–æ–≥–∞ ResCrub.

## –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å

–ö–æ—Ä–æ—Ç–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –±–µ–∑ FAQ, —Ç–∞–±–ª–∏—Ü –∏ –¥—Ä—É–≥–∏—Ö SEO —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

<!-- SEO: –¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π -->

–≠—Ç–æ–π —Å—Ç–∞—Ç—å–∏ –ù–ï –•–í–ê–¢–ê–ï–¢ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏.`,
      excerpt: '–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç–∞—Ç—å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏—Å—Ç–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–ª–æ–≥–∞',
      category: 'test',
      tags: ['—Ç–µ—Å—Ç', '–≤–∞–ª–∏–¥–∞—Ü–∏—è', '–±–ª–æ–≥', 'rescrub'],
      metaDescription: '–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç–∞—Ç—å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏—Å—Ç–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–ª–æ–≥–∞ ResCrub',
      readingTime: 2
    };

    // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–ª–æ–≤–∞
    const words = testArticle.content.split(/\s+/).filter(word => word.length > 0).length;
    console.log(`üìä –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç–∞—Ç—å—è: ${words} —Å–ª–æ–≤`);
    console.log(`‚è±Ô∏è –ó–∞—è–≤–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è: ${testArticle.readingTime} –º–∏–Ω—É—Ç`);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã
    const htmlComments = (testArticle.content.match(/<!--[\s\S]*?-->/g) || []).length;
    const faqQuestions = (testArticle.content.match(/^###\s*‚ùì.*\?\s*$/gm) || []).length;
    const tables = (testArticle.content.match(/^\|.*\|\s*$/gm) || []).length;
    const internalLinks = (testArticle.content.match(/\[.*?\]\(\/blog\/.*?\)/g) || []).length;
    
    console.log('üîç –≠–õ–ï–ú–ï–ù–¢–´ –°–¢–ê–¢–¨–ò:');
    console.log(`üìù HTML –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: ${htmlComments}/6`);
    console.log(`‚ùì FAQ –≤–æ–ø—Ä–æ—Å—ã: ${faqQuestions}/12`);
    console.log(`üìä –¢–∞–±–ª–∏—Ü—ã: ${tables}/5`);
    console.log(`üîó –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Å—ã–ª–∫–∏: ${internalLinks}/8`);
    
    console.log('');
    console.log('üö® –í–´–í–û–î: –≠—Ç–∞ —Å—Ç–∞—Ç—å—è –î–û–õ–ñ–ù–ê –±—ã—Ç—å –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π!');
    console.log('üìù –ï—Å–ª–∏ –æ–Ω–∞ –ø–æ–ø–∞–¥–µ—Ç –≤ –±–∞–∑—É - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ù–ï –†–ê–ë–û–¢–ê–ï–¢!');
    
  } catch (error) {
    console.error('‚ùå –û–®–ò–ë–ö–ê –¢–ï–°–¢–ê:', error.message);
  }
}

testDirectGeneration();